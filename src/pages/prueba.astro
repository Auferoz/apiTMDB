---
import Layout from "../layouts/Layout.astro";

// fetch-movies.ts
export const fetchMovies = async () => {
  const options = {
    method: 'GET',
    headers: {
      accept: 'application/json',
      Authorization: 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI0NTc2NDNjNzU4MzJiNWQ2ZjZjNjZlMTBmMjYwNjE4YiIsIm5iZiI6MTcyMDU1MTk2MS43MTA1NjIsInN1YiI6IjYwOWU4ZWFiZTYzNTcxMDAyYTZkODQ5MCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.obxcknX0StWcfioMFYVzBYm11vgIuQcsz7ieL9SHwf0'
    }
  };

  const res = await fetch('https://api.themoviedb.org/3/movie/popular?language=en-US&page=1', options);
  const data = await res.json();
  return data.results;
};


const movies = await fetchMovies();
---
<Layout title="prueba">
    {movies.map((movie: { original_title: string; }) => (
        <p>{movie.original_title}</p>
    ))}
</Layout>